<div class="min-h-dvh min-w-full">
  <!-- VİDEO: Bütün ekran ölçüləri üçün artıq görünəndir -->
  <video
    class="fixed top-0 left-0 w-full h-full object-cover -z-20"
    [autoplay]="true"
    [muted]="true"
    [loop]="true"
    playsinline
    preload="auto"
  >
    <source src="videos/main.mp4" type="video/mp4" />
  </video>

  <!-- Bütün məzmun bu konteynerin içindədir -->
  <div class="relative z-10">
    <button
      #menuButton
      (click)="toggleMobileMenu()"
      aria-label="Toggle navigation menu"
      class="sm:hidden fixed top-4 right-4 z-50 p-3 rounded-full text-neutral-200 bg-neutral-900/80 border border-white/10 shadow-lg hover:bg-neutral-700/90 focus:outline-none transition-all duration-200"
    >
      @if (isMobileMenuOpen) {
      <img class="w-10 h-10" src="icons/exit.svg" alt="Exit Menu Icon" /> }
      @else {
      <img
        class="w-10 h-10"
        src="icons/hamburgerMenu.svg"
        alt="Hamburger Menu Icon"
      />
      }
    </button>

    @if (isMobileMenuOpen) {
    <div
      class="fixed inset-0 z-40 bg-neutral-900/95 sm:hidden flex flex-col items-center justify-center p-6"
    >
      <ul
        class="space-y-5 text-neutral-200 text-xl font-medium w-full max-w-xs text-center"
      >
        <li>
          <a
            (click)="navigateAndCloseMenu('/about')"
            class="group flex items-center justify-center gap-3 py-3 px-4 rounded-lg hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/about.svg"
              class="w-6 h-6 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="About Me Icon"
            />
            About Me</a
          >
        </li>
        <li>
          <a
            (click)="navigateAndCloseMenu('/skills')"
            class="group flex items-center justify-center gap-3 py-3 px-4 rounded-lg hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/skills.svg"
              class="w-6 h-6 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Skills Icon"
            />
            Skills</a
          >
        </li>
        <li>
          <a
            (click)="navigateAndCloseMenu('/projects')"
            class="group flex items-center justify-center gap-3 py-3 px-4 rounded-lg hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/projects.svg"
              class="w-6 h-6 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Projects Icon"
            />
            Projects</a
          >
        </li>
        <li>
          <a
            (click)="navigateAndCloseMenu('/contact')"
            class="group flex items-center justify-center gap-3 py-3 px-4 rounded-lg hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/contact.svg"
              class="w-6 h-6 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Contact Icon"
            />
            Contact me</a
          >
        </li>
        <li>
          <a
            (click)="navigateAndCloseMenu('/resume')"
            class="group flex items-center justify-center gap-3 py-3 px-4 rounded-lg hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/resume.svg"
              class="w-6 h-6 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Resume Icon"
            />
            Resume</a
          >
        </li>
        <li>
          <a
            (click)="navigateAndCloseMenu('/services')"
            class="group flex items-center justify-center gap-3 py-3 px-4 rounded-lg hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/services.svg"
              class="w-6 h-6 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Services Icon"
            />
            Services</a
          >
        </li>
      </ul>
    </div>
    }

    <div
      [@navbarVisibility]="isHomePage ? 'visible' : 'hiddenLeft'"
      class="hidden sm:flex fixed top-0 left-0 h-full w-1/4 bg-black/60 z-30 items-center justify-start"
    >
      <ul
        class="space-y-8 pl-10 2xl:pl-12 text-neutral-200 text-lg xl:text-xl 2xl:text-2xl font-medium w-full"
      >
        <li>
          <a
            (click)="navigateWithEffect('/about')"
            class="group flex items-center gap-3 py-2 px-3 rounded-md hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/about.svg"
              class="w-7 h-7 xl:w-8 xl:h-8 2xl:w-9 2xl:h-9 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="About Me Icon"
            />
            About Me</a
          >
        </li>
        <li>
          <a
            (click)="navigateWithEffect('/skills')"
            class="group flex items-center gap-3 py-2 px-3 rounded-md hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/skills.svg"
              class="w-7 h-7 xl:w-8 xl:h-8 2xl:w-9 2xl:h-9 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Skills Icon"
            />
            Skills</a
          >
        </li>
        <li>
          <a
            (click)="navigateWithEffect('/projects')"
            class="group flex items-center gap-3 py-2 px-3 rounded-md hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            ><img
              src="icons/projects.svg"
              class="w-7 h-7 xl:w-8 xl:h-8 2xl:w-9 2xl:h-9 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Projects Icon"
            />
            Projects</a
          >
        </li>
      </ul>
    </div>
    <div
      [@navbarVisibility]="isHomePage ? 'visible' : 'hiddenRight'"
      class="hidden sm:flex fixed top-0 right-0 h-full w-1/4 bg-black/60 z-30 items-center justify-end"
    >
      <ul
        class="space-y-8 pr-10 2xl:pr-12 text-neutral-200 text-lg xl:text-xl 2xl:text-2xl font-medium text-right w-full"
      >
        <li>
          <a
            (click)="navigateWithEffect('/contact')"
            class="group flex items-center justify-end gap-3 py-2 px-3 rounded-md hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            >Contact me
            <img
              src="icons/contact.svg"
              class="w-7 h-7 xl:w-8 xl:h-8 2xl:w-9 2xl:h-9 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Contact Icon"
          /></a>
        </li>
        <li>
          <a
            (click)="navigateWithEffect('/resume')"
            class="group flex items-center justify-end gap-3 py-2 px-3 rounded-md hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            >Resume
            <img
              src="icons/resume.svg"
              class="w-7 h-7 xl:w-8 xl:h-8 2xl:w-9 2xl:h-9 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Resume Icon"
          /></a>
        </li>
        <li>
          <a
            (click)="navigateWithEffect('/services')"
            class="group flex items-center justify-end gap-3 py-2 px-3 rounded-md hover:bg-white/10 hover:text-yellow-400 focus:outline-none focus:text-yellow-400 focus:bg-white/10 transition-all duration-300 ease-in-out cursor-pointer"
            >Services
            <img
              src="/icons/services.svg"
              class="w-7 h-7 xl:w-8 xl:h-8 2xl:w-9 2xl:h-9 transition-transform duration-300 ease-in-out group-hover:rotate-[360deg]"
              alt="Services Icon"
          /></a>
        </li>
      </ul>
    </div>

    <div class="relative w-full min-h-dvh">
      @if (isHomePage) {
      <div
        [@homePageContentAnimation]
        class="absolute inset-0 flex flex-col items-center justify-center p-4 text-center"
      >
        <div class="flex flex-col items-center gap-4 sm:hidden">
          <img
            src="images/profile.webp"
            alt="Mobil Mustafayev Profile"
            class="w-40 h-40 rounded-full object-cover border-4 border-yellow-400 shadow-lg"
          />
          <div class="flex flex-col gap-2">
            <h2 class="text-3xl font-bold text-neutral-100">{{ title }}</h2>
            <h1 class="text-xl font-semibold text-yellow-400">
              Full-Stack Angular Developer
            </h1>
          </div>
          <a
            (click)="navigateAndCloseMenu('/projects')"
            class="mt-6 flex items-center justify-center gap-3 bg-yellow-400 text-gray-900 font-bold py-3 px-8 rounded-full hover:bg-yellow-300 transition-all duration-300 ease-in-out cursor-pointer"
          >
            <span>View My Projects</span>
            <img src="icons/search.svg" alt="arrow" class="w-5 h-5" />
          </a>
        </div>
        <div class="hidden sm:flex flex-col items-center">
          <img
            src="images/profile.webp"
            alt="Profile"
            class="w-64 h-64 rounded-full object-cover border-4 border-yellow-400 mb-6 shadow-lg xl:w-72 xl:h-72 2xl:w-96 2xl:h-96"
          />
          <div class="flex flex-col items-center">
            <p
              class="text-3xl font-bold text-yellow-400 drop-shadow-md tracking-wide xl:text-4xl 2xl:text-5xl"
            >
              {{ title }}
            </p>
            <p
              id="typingText"
              class="text-xl font-medium mt-4 flex justify-start items-center min-h-[28px] w-[480px] pl-20 xl:text-2xl xl:w-[580px] xl:pl-28 2xl:text-3xl 2xl:w-[680px] 2xl:pl-32"
            >
              <span class="mr-1">{{ textToDisplay }}</span>
              <span class="blinking-cursor">|</span>
            </p>
          </div>
        </div>
      </div>
      } @if (!isHomePage) {
      <div [@routeWrapperAnimation] class="absolute inset-0 w-full h-full">
        <router-outlet></router-outlet>
      </div>
      }
    </div>
  </div>
</div>
